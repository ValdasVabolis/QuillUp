var question = $('.question-large[data-id="<%= @question.id %>"]');
var form = question.find('#form-question');
var body = question.find('.question-body');
var area = form.find('#area');
var text = body.text();

if(question.hasClass('editing')) {
	question.removeClass('editing');
} else {
	question.addClass('editing');
	area.val(text).focus();
}
autosize(area);

function showCharacterLimitBody(limit) {
  var form = $('#form-question');
  var text_area = form.find('#area');
  var char_counter = form.find('.question-body-group > .char-counter p');
  var length = text_area.val().length;
  var counter = length + '/' + limit;
  char_counter.html(counter);

  function updateCounter() {
    length = text_area.val().length;
    counter = length + '/' + limit;
    char_counter.html(counter);
  }

  text_area.bind('keyup keydown', function(e) {
    updateCounter();
    if(length >= limit) {
      if(e.key !== 'Backspace') {
        this.value = this.value.substr(0, limit);
        return false;
      }
    }
  });
}
showCharacterLimitBody(5000);